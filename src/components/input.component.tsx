import { X } from "lucide-react";
import React, { InputHTMLAttributes, useState } from "react";

interface InputComponentProps
    extends Omit<InputHTMLAttributes<HTMLInputElement>, "prefix"> {
    prefix?: React.ReactNode | string;
    suffix?: React.ReactNode;
    labelText?: string;
    className?: string;
    errors?: string[];
}

const InputComponent: React.FC<InputComponentProps> = ({
    prefix,
    suffix,
    labelText,
    disabled,
    className,
    type,
    errors = [],
    ...inputProps
}) => {
    const [showPassword, setShowPassword] = useState<boolean>(false);

    return (
        <div>
            {labelText && (
                <label className="block mb-2 text-white text-sm">
                    {labelText}
                </label>
            )}
            <div className="relative overflow-visible">
                {prefix && (
                    <span className="absolute inset-y-0 left-0 flex items-center w-10 pl-2 justify-center select-none">
                        {prefix}
                    </span>
                )}
                <input
                    className={`p-4 px-5 ${prefix ? "pl-12" : ""} ${suffix ? "pr-12" : ""} ${
                        disabled
                            ? "bg-gray-100/5 text-gray-500 cursor-not-allowed"
                            : "border border-dark"
                    } focus:outline-none w-full bg-transparent rounded-md focus:ring-white/20 focus:ring-offset-primary focus:ring focus:ring-offset-2 focus-visible:outline-none border text-neutral select-none font-light text-sm ${className}`}
                    disabled={disabled}
                    type={
                        type === "password"
                            ? showPassword
                                ? "text"
                                : "password"
                            : type
                    }
                    {...inputProps}
                />

                {suffix && type !== "password" && (
                    <span className="absolute inset-y-0 right-0 flex items-center pr-2 w-10 justify-center">
                        {suffix}
                    </span>
                )}

                {type === "password" && (
                    <span className="absolute inset-y-0 right-0 flex items-center pr-2 w-10 justify-center">
                        <button onClick={() => setShowPassword(!showPassword)}>
                            {showPassword ? (
                                <svg
                                    width="20"
                                    height="20"
                                    viewBox="0 0 20 20"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M4.44375 2.49452C4.36142 2.40171 4.26149 2.32617 4.14975 2.27227C4.03801 2.21837 3.91669 2.18719 3.7928 2.18052C3.66892 2.17386 3.54495 2.19185 3.42807 2.23345C3.3112 2.27505 3.20374 2.33943 3.11193 2.42287C3.02012 2.50631 2.94578 2.60713 2.89322 2.71951C2.84067 2.83189 2.81094 2.95358 2.80576 3.07753C2.80058 3.20149 2.82005 3.32523 2.86305 3.4416C2.90605 3.55797 2.97172 3.66465 3.05625 3.75546L4.30625 5.13436C1.61485 6.92655 0.446877 9.49842 0.390627 9.61952C0.337699 9.73952 0.310364 9.86923 0.310364 10.0004C0.310364 10.1315 0.337699 10.2612 0.390627 10.3812C0.419533 10.4453 1.10391 11.9641 2.61641 13.4758C4.63828 15.4953 7.1875 16.5625 10 16.5625C11.3669 16.5701 12.7215 16.3044 13.9844 15.7812L15.5539 17.5078C15.722 17.6884 15.9545 17.7954 16.201 17.8057C16.4474 17.816 16.688 17.7287 16.8706 17.5628C17.0532 17.3969 17.163 17.1657 17.1762 16.9194C17.1895 16.673 17.1051 16.4314 16.9414 16.2469L4.44375 2.49452ZM10 14.6875C7.68828 14.6875 5.66641 13.8492 3.99141 12.1969C3.33254 11.5445 2.76561 10.8054 2.30625 9.99999C2.71797 9.27264 3.77422 7.66405 5.5875 6.53983L12.6258 14.2828C11.777 14.5538 10.891 14.6904 10 14.6875ZM19.6094 10.3812C19.5813 10.4445 18.9063 11.9437 17.4219 13.4406C17.3369 13.535 17.2336 13.6111 17.1183 13.6643C17.003 13.7175 16.8781 13.7468 16.7511 13.7503C16.6242 13.7538 16.4979 13.7314 16.3798 13.6846C16.2618 13.6378 16.1545 13.5675 16.0644 13.478C15.9743 13.3885 15.9034 13.2816 15.8559 13.1638C15.8084 13.046 15.7853 12.9198 15.7881 12.7928C15.7908 12.6659 15.8193 12.5408 15.8719 12.4252C15.9244 12.3096 15.9999 12.2059 16.0938 12.1203C16.7173 11.4863 17.2552 10.7735 17.6938 9.99999C17.2347 9.1944 16.6677 8.45528 16.0086 7.80311C14.3328 6.15077 12.3117 5.31249 10 5.31249C9.73828 5.31249 9.47656 5.32342 9.21875 5.3453C9.09451 5.35861 8.96887 5.34695 8.8492 5.31101C8.72953 5.27506 8.61825 5.21556 8.52191 5.13599C8.42557 5.05643 8.3461 4.95841 8.28818 4.84769C8.23027 4.73697 8.19507 4.6158 8.18465 4.49128C8.17423 4.36676 8.18882 4.24142 8.22753 4.12262C8.26625 4.00382 8.32833 3.89396 8.41012 3.7995C8.4919 3.70503 8.59175 3.62787 8.70378 3.57254C8.81581 3.51722 8.93778 3.48485 9.0625 3.47733C9.36953 3.45077 9.6875 3.43749 10 3.43749C12.8125 3.43749 15.3617 4.50546 17.382 6.52499C18.8938 8.03671 19.5781 9.55624 19.607 9.61952C19.6603 9.73935 19.6881 9.86898 19.6885 10.0001C19.6889 10.1313 19.6619 10.2611 19.6094 10.3812Z"
                                        fill="#ffffff"
                                    />
                                </svg>
                            ) : (
                                <svg
                                    width="20"
                                    height="20"
                                    viewBox="0 0 32 32"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        d="M31.375 15.3912C31.3288 15.29 30.2338 12.8587 27.815 10.44C24.5788 7.20875 20.5 5.5 16 5.5C11.5 5.5 7.42125 7.20875 4.18875 10.44C1.77 12.8587 0.675002 15.29 0.625002 15.3912C0.540319 15.5832 0.496582 15.7908 0.496582 16.0006C0.496582 16.2105 0.540319 16.418 0.625002 16.61C0.671252 16.7125 1.76625 19.1425 4.18625 21.5613C7.42125 24.7925 11.5 26.5 16 26.5C20.5 26.5 24.5788 24.7925 27.81 21.5613C30.23 19.1425 31.325 16.7125 31.3713 16.61C31.4565 16.4183 31.5009 16.2109 31.5015 16.001C31.5022 15.7912 31.4591 15.5835 31.375 15.3912ZM25.6175 19.5163C22.9338 22.1588 19.6988 23.5 16 23.5C12.3013 23.5 9.06625 22.1587 6.38625 19.515C5.33168 18.4715 4.42455 17.2889 3.69 16C4.42477 14.7116 5.33188 13.5294 6.38625 12.4862C9.0675 9.84125 12.3013 8.5 16 8.5C19.6988 8.5 22.9325 9.84125 25.6138 12.4862C26.6682 13.5293 27.5754 14.7115 28.31 16C27.5753 17.2889 26.6682 18.4714 25.6138 19.515L25.6175 19.5163ZM16 10.5C14.9122 10.5 13.8488 10.8226 12.9444 11.4269C12.0399 12.0313 11.3349 12.8902 10.9187 13.8952C10.5024 14.9002 10.3935 16.0061 10.6057 17.073C10.8179 18.1399 11.3417 19.1199 12.1109 19.8891C12.8801 20.6583 13.8601 21.1821 14.927 21.3943C15.9939 21.6065 17.0998 21.4976 18.1048 21.0813C19.1098 20.6651 19.9687 19.9601 20.5731 19.0556C21.1774 18.1512 21.5 17.0878 21.5 16C21.4983 14.5418 20.9184 13.1438 19.8873 12.1127C18.8562 11.0816 17.4582 10.5017 16 10.5ZM16 18.5C15.5055 18.5 15.0222 18.3534 14.6111 18.0787C14.2 17.804 13.8795 17.4135 13.6903 16.9567C13.5011 16.4999 13.4516 15.9972 13.548 15.5123C13.6445 15.0273 13.8826 14.5819 14.2322 14.2322C14.5819 13.8826 15.0273 13.6445 15.5123 13.548C15.9972 13.4516 16.4999 13.5011 16.9567 13.6903C17.4135 13.8795 17.804 14.2 18.0787 14.6111C18.3534 15.0222 18.5 15.5055 18.5 16C18.5 16.663 18.2366 17.2989 17.7678 17.7678C17.2989 18.2366 16.663 18.5 16 18.5Z"
                                        fill="#ffffff"
                                    />
                                </svg>
                            )}
                        </button>
                    </span>
                )}
            </div>
            {errors && (
                <div className="flex flex-col gap-1 pt-2">
                    {errors.map((text, i) => (
                        <div
                            key={i}
                            className="text-red flex gap-2 text-xs items-center font-normal"
                        >
                            <X size={12} />
                            {text.replace("_", " ")}
                        </div>
                    ))}
                </div>
            )}
        </div>
    );
};

export default InputComponent;
